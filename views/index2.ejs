<% if (user) { %>

    <%- include ('partials/header-login') %>
    
    <div class="container-fluid padding-left-custom pt-4">
        <div class="row">
          <div class="col-md-3">
            <div>
                <p class="fw-bold fs-5">Logged in as <%=user.username%></p>
            </div>
            <form action="/medhome" method="GET">
            <div class="card">
                <p class="card-header text-start" style="color: #adb5bd;">Search</p>
                <div class="card-body">
    
                    <div class="input-group mb-3">
                      <input name="searchtitle" type="text" class="form-control" placeholder="search by title" aria-label="Search box" aria-describedby="button-addon2">
                      <button class="btn btn-warning custom-search-button-color" type="submit" id="button-addon2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                          <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"> 
                          </path>
                        </svg>
                      </button>
                    </div>                                         
                </div>
            </div>

            

            <div class="dropdown">
            <% if (administrator) { %>
            <div>
                <a class="btn btn-primary btn-lg" href="/product/new" role="button"> Add Product</a>
            </div>
            <% } %>
            <button class="btn btn-secondary btn-lg dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                Filter
            </button>
            
            <ul class="dropdown-menu dropdown-menu" aria-labelledby="dropdownMenuButton2">           
            
                
            <li><a class="dropdown-item active" >Product Type</a></li>
                
            <ul class="list-group">
            <li class="list-group-item">
                <input name="Tablet" class="form-check-input me-1" type="checkbox" value="Tablet" aria-label="...">
                Tablet
            </li>
            <li class="list-group-item">
                <input name="Capsule" class="form-check-input me-1" type="checkbox" value="Capsule" aria-label="...">
                Capsule
            </li>
            <li class="list-group-item">
                <input name="Syrup" class="form-check-input me-1" type="checkbox" value="Syrup" aria-label="...">
                Syrup
            </li>
            <li class="list-group-item">
                <input name="Injection" class="form-check-input me-1" type="checkbox" value="Injection" aria-label="...">
                Injection
            </li>
            <li class="list-group-item">
                <input name="Ointment" class="form-check-input me-1" type="checkbox" value="Ointment" aria-label="...">
                Ointment
            </li>
            <li class="list-group-item">
                <input name="Cream" class="form-check-input me-1" type="checkbox" value="Cream" aria-label="...">
                Cream
            </li>
            <li class="list-group-item">
                <input name="Gel" class="form-check-input me-1" type="checkbox" value="Gel" aria-label="...">
                Gel
            </li>
            <li class="list-group-item">
                <input name="Powder" class="form-check-input me-1" type="checkbox" value="Powder" aria-label="...">
                Powder
            </li>
            <li class="list-group-item">
                <input name="Suspension" class="form-check-input me-1" type="checkbox" value="Suspension" aria-label="...">
                Suspension
            </li>
            <li class="list-group-item">
                <input name="Solution" class="form-check-input me-1" type="checkbox" value="Solution" aria-label="...">
                Solution
            </li>
            <li class="list-group-item">
                <input name="Soap" class="form-check-input me-1" type="checkbox" value="Soap" aria-label="...">
                Soap
            </li>
            </ul>            
            
            </ul>
            </div>

            </form>
          </div>



          <div class="col-md-9">
            <div class="row">
                <div class="col-md-12">
                    <section class="gallery">
                        <div class="container">
                            <div class="title mb-4">
                                <h1>Search Results</h1>
                            </div>
                            <div class="gallery-items">
                                <% results.forEach(function(product){ %>
                                <div class="item mb-4 me-4">
                                    <div class="col">
                                        <img src="images/<%=product.pname%>.jpg" style="width:200px; height:200px;" class="img-responsive center-block d-block mx-auto img-fluid" alt="gallery" />
                                        <ol class="list-group p-2">
                                            <li class="list-group-item-dark d-flex justify-content-between align-items-start">
                                                <div class="ms-2 mx-auto">
                                                    <div class="fw-bold d-flex"><a href="#"><%=product.pname%></a></div>
                              
                                                    <div class="btn-group">
                                                    <a href="products/<%=product._id%>" class="btn btn-outline-light active" aria-current="page">View</a>
                                                    <button value="<%=product._id%>" class="btn btn-outline-light active addcart">Add to Cart</button>
                                                    </div>	
                                                </div>	
                                            </li>
                                        </ol>
                                    </div>	
                                </div>
                                <% }); %>                                                                

                            </div>


                            <div class="pagination">
                                <div class="prev">Prev</div>
                                <div class="page">Page <span class="page-num"></span></div>
                                <div class="next">Next</div>
                            </div>

                        </div>
                    </section>
                    <script src="/javascripts/script.js"></script>
                </div>
            </div>
          </div>
        </div>
    </div>
    
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>

  

<% } else { %>
<%- include ('partials/header-login-no-bar') %>
<div class="card bg-light text-center">
    <img src="/images/medical.jpg" class="card-img img-fluid">
    <div class="card-img-overlay">
        <div class="card-body">
            <a href="/login" class="btn btn-dark custom-brand-title-font fs-2 fw-bold m-4">Login</a>
            <a href="/register" class="btn btn-dark custom-brand-title-font fs-2 fw-bold m-4">Register</a>
        </div>
    </div>
  </div>


<%} %>
<%- include ('partials/footer-register') %>

